<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>CMC Mod Manager</title>
        <link rel="stylesheet" href="./custom-dialogs.css" type="text/css">
    </head>
    <body onkeyup="
        switch (event.key) {
            case 'Enter':
                ok(document.getElementById('input').value);
                break;
            case 'Escape':
                cancel();
                break;
        }
    ">
        <!-- <h1 id="title">Title</h1> -->
        <div class="center">
            <span id="body">Body</span>
        </div>
        <input type="text" id="input" placeholder=""/>
        <br/>
        <div class="right">
            <button id="cancel" onclick="cancel();">Cancel</button>
            <button id="ok" onclick="ok(document.getElementById('input').value);">OK</button>
        </div>
        <script>
            var id;
            dialog.onStart((options) => {
                console.log(options);
                id = options.id;
                document.getElementById("body").innerHTML = options.body;
                if (options.title != undefined) {
                    document.title = options.title;
                }
                if (options.placeholder != undefined) {
                    document.getElementById("input").placeholder = options.placeholder;
                }
                if (options.invalidCharacters != false) {
                    document.getElementById("input").oninput = (event) => {
                        event.target.value = event.target.value.replace(options.invalidCharacters, "");
                    }
                }
                if (options.okLabel != undefined) {
                    document.getElementById("ok").innerHTML = options.okLabel;
                }
                if (options.cancelLabel != undefined) {
                    document.getElementById("cancel").innerHTML = options.cancelLabel;
                }
                dialog.resize(id, document.documentElement.getBoundingClientRect().height);
                document.getElementById('input').focus();
            });
            function ok(input) {
                if (id == undefined) return;
                dialog.ok(id, input);
            }
            function cancel() {
                if (id == undefined) return;
                dialog.cancel(id);
            }
        </script>
    </body>
</html>
